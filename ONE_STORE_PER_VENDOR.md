# üè™ One Store Per Vendor - Architecture

## –ò–∑–º–µ–Ω–µ–Ω–∏–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

**–ë—ã–ª–æ:** –û–¥–∏–Ω –≤–µ–Ω–¥–æ—Ä –º–æ–∂–µ—Ç –∏–º–µ—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –º–∞–≥–∞–∑–∏–Ω–æ–≤ (One-to-Many)
**–°—Ç–∞–ª–æ:** –û–¥–∏–Ω –≤–µ–Ω–¥–æ—Ä = –æ–¥–∏–Ω –º–∞–≥–∞–∑–∏–Ω (One-to-One)

---

## üéØ –ü–æ—á–µ–º—É One-to-One?

### –î–ª—è MVP —ç—Ç–æ –ø—Ä–æ—â–µ:
1. ‚úÖ **–ü—Ä–æ—â–µ UX** - –≤–µ–Ω–¥–æ—Ä –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç –æ–¥–∏–Ω –º–∞–≥–∞–∑–∏–Ω
2. ‚úÖ **–ü—Ä–æ—â–µ –ª–æ–≥–∏–∫–∞** - –Ω–µ –Ω—É–∂–Ω–æ –≤—ã–±–∏—Ä–∞—Ç—å –º–∞–≥–∞–∑–∏–Ω –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –æ—Ñ—Ñ–µ—Ä–∞
3. ‚úÖ **–ü—Ä–æ—â–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ** - –Ω–∞ –∫–∞—Ä—Ç–µ –æ–¥–∏–Ω –º–∞—Ä–∫–µ—Ä –Ω–∞ –≤–µ–Ω–¥–æ—Ä–∞
4. ‚úÖ **–ú–µ–Ω—å—à–µ –ø—É—Ç–∞–Ω–∏—Ü—ã** - —á–µ—Ç–∫–∞—è —Å–≤—è–∑—å: 1 –∞–∫–∫–∞—É–Ω—Ç = 1 –º–∞–≥–∞–∑–∏–Ω

### –î–ª—è –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è –ø–æ–∑–∂–µ:
–ï—Å–ª–∏ –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è, –º–æ–∂–Ω–æ –ª–µ–≥–∫–æ –≤–µ—Ä–Ω—É—Ç—å—Å—è –∫ One-to-Many –ø–æ–∑–∂–µ.

---

## üìä –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö

### Prisma Schema

**–ë—ã–ª–æ:**
```prisma
model User {
  stores Store[] // –ú–Ω–æ–≥–æ –º–∞–≥–∞–∑–∏–Ω–æ–≤
}

model Store {
  merchantId String // –ù–µ —É–Ω–∏–∫–∞–ª—å–Ω—ã–π
  merchant   User 
}
```

**–°—Ç–∞–ª–æ:**
```prisma
model User {
  store Store? // –û–î–ò–ù –º–∞–≥–∞–∑–∏–Ω (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π)
}

model Store {
  merchantId String  @unique // –£–Ω–∏–∫–∞–ª—å–Ω—ã–π!
  merchant   User
}
```

### –ú–∏–≥—Ä–∞—Ü–∏—è

–ö–æ–≥–¥–∞ –≤–∫–ª—é—á–∏—Ç–µ PostgreSQL –Ω–∞ Render, –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:

```bash
cd server
npx prisma migrate dev --name one_store_per_vendor
```

Prisma —Å–æ–∑–¥–∞—Å—Ç –º–∏–≥—Ä–∞—Ü–∏—é, –∫–æ—Ç–æ—Ä–∞—è:
1. –î–æ–±–∞–≤–∏—Ç `@unique` constraint –Ω–∞ `merchantId`
2. –ò–∑–º–µ–Ω–∏—Ç –æ—Ç–Ω–æ—à–µ–Ω–∏–µ User-Store

---

## üîß –õ–æ–≥–∏–∫–∞ –≤ –∫–æ–¥–µ

### Backend (Upsert)

```typescript
// –í—Å–µ–≥–¥–∞ —Å–æ–∑–¥–∞—ë—Ç –∏–ª–∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç –û–î–ò–ù –º–∞–≥–∞–∑–∏–Ω –≤–µ–Ω–¥–æ—Ä–∞
const store = await prisma.store.upsert({
    where: { merchantId }, // –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∫–ª—é—á!
    create: { ...data, merchantId },
    update: { ...data }
});
```

### Frontend

**Store Settings:**
- –ü—Ä–∏ –ø–µ—Ä–≤–æ–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ ‚Üí **—Å–æ–∑–¥–∞—ë—Ç** –º–∞–≥–∞–∑–∏–Ω
- –ü—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ ‚Üí **–æ–±–Ω–æ–≤–ª—è–µ—Ç** –º–∞–≥–∞–∑–∏–Ω
- –í–µ–Ω–¥–æ—Ä –Ω–µ –º–æ–∂–µ—Ç —Å–æ–∑–¥–∞—Ç—å –≤—Ç–æ—Ä–æ–π –º–∞–≥–∞–∑–∏–Ω

**Create Offer:**
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –º–∞–≥–∞–∑–∏–Ω —Ç–µ–∫—É—â–µ–≥–æ –≤–µ–Ω–¥–æ—Ä–∞
- –ù–µ –Ω—É–∂–Ω–æ –≤—ã–±–∏—Ä–∞—Ç—å –∏–∑ —Å–ø–∏—Å–∫–∞ (—Ç.–∫. –º–∞–≥–∞–∑–∏–Ω –æ–¥–∏–Ω)

---

## üíº –î–ª—è –≤–µ–Ω–¥–æ—Ä–æ–≤

### –ß—Ç–æ —ç—Ç–æ –∑–Ω–∞—á–∏—Ç:

1. **–û–¥–∏–Ω –º–∞–≥–∞–∑–∏–Ω** - –£ –≤–∞—Å –º–æ–∂–µ—Ç –±—ã—Ç—å —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω –º–∞–≥–∞–∑–∏–Ω
2. **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ** - –ò–∑–º–µ–Ω–µ–Ω–∏–µ Store Settings –æ–±–Ω–æ–≤–ª—è–µ—Ç –≤–∞—à –º–∞–≥–∞–∑–∏–Ω
3. **–û—Ñ—Ñ–µ—Ä—ã** - –í—Å–µ –æ—Ñ—Ñ–µ—Ä—ã –ø—Ä–∏–≤—è–∑–∞–Ω—ã –∫ –≤–∞—à–µ–º—É –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–º—É –º–∞–≥–∞–∑–∏–Ω—É

### –ï—Å–ª–∏ –Ω—É–∂–Ω–æ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ç–æ—á–µ–∫:

–í–∞—Ä–∏–∞–Ω—Ç 1: **–°–æ–∑–¥–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–µ –∞–∫–∫–∞—É–Ω—Ç—ã** (—Ä–∞–∑–Ω—ã–µ Telegram –∞–∫–∫–∞—É–Ω—Ç—ã)
–í–∞—Ä–∏–∞–Ω—Ç 2: **–ü–æ–¥–æ–∂–¥–∞—Ç—å v2.0** (–µ—Å–ª–∏ –¥–æ–±–∞–≤–∏–º –ø–æ–¥–¥–µ—Ä–∂–∫—É –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –º–∞–≥–∞–∑–∏–Ω–æ–≤)

---

## üó∫Ô∏è –ù–∞ –∫–∞—Ä—Ç–µ

- **–û–¥–∏–Ω –º–∞—Ä–∫–µ—Ä** –Ω–∞ –≤–µ–Ω–¥–æ—Ä–∞
- –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –∏–∑ Store Settings
- –ü—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –∞–¥—Ä–µ—Å–∞ - –º–∞—Ä–∫–µ—Ä –ø–µ—Ä–µ–º–µ—â–∞–µ—Ç—Å—è

---

## üöÄ –ï—Å–ª–∏ –Ω—É–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å—Å—è –∫ One-to-Many

–í –±—É–¥—É—â–µ–º, –µ—Å–ª–∏ –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è:

1. –£–±—Ä–∞—Ç—å `@unique` —Å `merchantId` –≤ Store
2. –ò–∑–º–µ–Ω–∏—Ç—å `store Store?` –Ω–∞ `stores Store[]` –≤ User
3. –î–æ–±–∞–≤–∏—Ç—å –≤ UI –≤—ã–±–æ—Ä –º–∞–≥–∞–∑–∏–Ω–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –æ—Ñ—Ñ–µ—Ä–∞
4. –û–±–Ω–æ–≤–∏—Ç—å Dashboard –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤—Å–µ—Ö –º–∞–≥–∞–∑–∏–Ω–æ–≤

–ù–æ –¥–ª—è MVP **One-to-One –∏–¥–µ–∞–ª–µ–Ω**.

---

## ‚úÖ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

| –ê—Å–ø–µ–∫—Ç | One-to-One (—Ç–µ–∫—É—â–∏–π) | One-to-Many |
|--------|---------------------|-------------|
| –ü—Ä–æ—Å—Ç–æ—Ç–∞ | ‚úÖ –û—á–µ–Ω—å –ø—Ä–æ—Å—Ç–æ–π | ‚ö†Ô∏è –°–ª–æ–∂–Ω–µ–µ |
| UX | ‚úÖ –ò–Ω—Ç—É–∏—Ç–∏–≤–Ω—ã–π | ‚ö†Ô∏è –ù—É–∂–µ–Ω –≤—ã–±–æ—Ä |
| –ö–æ–¥ | ‚úÖ –ú–µ–Ω—å—à–µ –ª–æ–≥–∏–∫–∏ | ‚ùå –ë–æ–ª—å—à–µ –ª–æ–≥–∏–∫–∏ |
| –î–ª—è MVP | ‚úÖ –ò–¥–µ–∞–ª—å–Ω–æ | ‚ùå Overkill |

---

## üìù –ü—Ä–∏–º–µ—Ä—ã

### –í–µ–Ω–¥–æ—Ä —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç—Å—è:
```
1. –°–æ–∑–¥–∞—ë—Ç –∞–∫–∫–∞—É–Ω—Ç –≤ Telegram
2. –ü–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç—Å—è –Ω–∞ Merchant
3. –ó–∞—Ö–æ–¥–∏—Ç –≤ Store Settings
4. –ó–∞–ø–æ–ª–Ω—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –º–∞–≥–∞–∑–∏–Ω–∞
5. –°–æ—Ö—Ä–∞–Ω—è–µ—Ç ‚Üí —Å–æ–∑–¥–∞—ë—Ç—Å—è –û–î–ò–ù –º–∞–≥–∞–∑–∏–Ω
```

### –í–µ–Ω–¥–æ—Ä –æ–±–Ω–æ–≤–ª—è–µ—Ç –∞–¥—Ä–µ—Å:
```
1. Store Settings ‚Üí –≤–≤–æ–¥–∏—Ç –Ω–æ–≤—ã–π –∞–¥—Ä–µ—Å
2. Verify Address
3. Save ‚Üí –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è —Ç–æ—Ç –∂–µ –º–∞–≥–∞–∑–∏–Ω
4. –ù–∞ –∫–∞—Ä—Ç–µ –º–∞—Ä–∫–µ—Ä –ø–µ—Ä–µ–º–µ—â–∞–µ—Ç—Å—è
```

### –í–µ–Ω–¥–æ—Ä —Å–æ–∑–¥–∞—ë—Ç –æ—Ñ—Ñ–µ—Ä:
```
1. Dashboard ‚Üí Create Offer
2. –ó–∞–ø–æ–ª–Ω—è–µ—Ç —Ñ–æ—Ä–º—É
3. –û—Ñ—Ñ–µ—Ä –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏–≤—è–∑—ã–≤–∞–µ—Ç—Å—è –∫ –µ–≥–æ –º–∞–≥–∞–∑–∏–Ω—É
4. –ù–µ –Ω—É–∂–Ω–æ –≤—ã–±–∏—Ä–∞—Ç—å –º–∞–≥–∞–∑–∏–Ω!
```

---

**–ò—Ç–æ–≥:** –û–¥–∏–Ω –≤–µ–Ω–¥–æ—Ä = –æ–¥–∏–Ω –º–∞–≥–∞–∑–∏–Ω = –ø—Ä–æ—Å—Ç–æ –∏ –ø–æ–Ω—è—Ç–Ω–æ! üéâ
